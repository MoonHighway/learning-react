{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar _router = _interopRequireDefault(require(\"next/router\"));\n\nvar _onDemandEntriesUtils = require(\"./on-demand-entries-utils\");\n\nvar _default = function _default(_ref) {\n  var assetPrefix;\n  return _regeneratorRuntime.async(function _default$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          assetPrefix = _ref.assetPrefix;\n\n          _router[\"default\"].ready(function () {\n            _router[\"default\"].events.on('routeChangeComplete', _onDemandEntriesUtils.setupPing.bind(void 0, assetPrefix, function () {\n              return _router[\"default\"].pathname;\n            }));\n          });\n\n          (0, _onDemandEntriesUtils.setupPing)(assetPrefix, function () {\n            return _router[\"default\"].pathname;\n          }, _onDemandEntriesUtils.currentPage); // prevent HMR connection from being closed when running tests\n\n          if (!process.env.__NEXT_TEST_MODE) {\n            document.addEventListener('visibilitychange', function (event) {\n              var state = document.visibilityState;\n\n              if (state === 'visible') {\n                (0, _onDemandEntriesUtils.setupPing)(assetPrefix, function () {\n                  return _router[\"default\"].pathname;\n                }, true);\n              } else {\n                (0, _onDemandEntriesUtils.closePing)();\n              }\n            });\n            window.addEventListener('beforeunload', function () {\n              (0, _onDemandEntriesUtils.closePing)();\n            });\n          }\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/eveporcello/Desktop/ /recipes-next/node_modules/next/dist/client/dev/on-demand-entries-client.js"],"names":["_interopRequireDefault","require","exports","__esModule","_router","_onDemandEntriesUtils","_default","_ref","assetPrefix","ready","events","on","setupPing","bind","pathname","currentPage","process","env","__NEXT_TEST_MODE","document","addEventListener","event","state","visibilityState","closePing","window"],"mappings":"AAAA;;;;AAAa,IAAIA,sBAAsB,GAACC,OAAO,CAAC,8CAAD,CAAlC;;AAAmFC,OAAO,CAACC,UAAR,GAAmB,IAAnB;AAAwBD,OAAO,WAAP,GAAgB,KAAK,CAArB;;AAAuB,IAAIE,OAAO,GAACJ,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAlC;;AAA2D,IAAII,qBAAqB,GAACJ,OAAO,CAAC,2BAAD,CAAjC;;AAA+D,IAAIK,QAAQ,GAAC,SAATA,QAAS,CAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkBC,UAAAA,WAAlB,GAA+BD,IAA/B,CAAkBC,WAAlB;;AAAoCJ,UAAAA,OAAO,WAAP,CAAgBK,KAAhB,CAAsB,YAAI;AAACL,YAAAA,OAAO,WAAP,CAAgBM,MAAhB,CAAuBC,EAAvB,CAA0B,qBAA1B,EAAgDN,qBAAqB,CAACO,SAAtB,CAAgCC,IAAhC,CAAqC,KAAK,CAA1C,EAA4CL,WAA5C,EAAwD;AAAA,qBAAIJ,OAAO,WAAP,CAAgBU,QAApB;AAAA,aAAxD,CAAhD;AAAwI,WAAnK;;AAAqK,WAAC,GAAET,qBAAqB,CAACO,SAAzB,EAAoCJ,WAApC,EAAgD;AAAA,mBAAIJ,OAAO,WAAP,CAAgBU,QAApB;AAAA,WAAhD,EAA6ET,qBAAqB,CAACU,WAAnG,EAAzM,CAAyT;;AAC/kB,cAAG,CAACC,OAAO,CAACC,GAAR,CAAYC,gBAAhB,EAAiC;AAACC,YAAAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA6C,UAAAC,KAAK,EAAE;AAAC,kBAAIC,KAAK,GAACH,QAAQ,CAACI,eAAnB;;AAAmC,kBAAGD,KAAK,KAAG,SAAX,EAAqB;AAAC,iBAAC,GAAEjB,qBAAqB,CAACO,SAAzB,EAAoCJ,WAApC,EAAgD;AAAA,yBAAIJ,OAAO,WAAP,CAAgBU,QAApB;AAAA,iBAAhD,EAA6E,IAA7E;AAAoF,eAA1G,MAA8G;AAAC,iBAAC,GAAET,qBAAqB,CAACmB,SAAzB;AAAuC;AAAC,aAA/O;AAAiPC,YAAAA,MAAM,CAACL,gBAAP,CAAwB,cAAxB,EAAuC,YAAI;AAAC,eAAC,GAAEf,qBAAqB,CAACmB,SAAzB;AAAuC,aAAnF;AAAsF;;AADnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAb;;AACkGtB,OAAO,WAAP,GAAgBI,QAAhB","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _router=_interopRequireDefault(require(\"next/router\"));var _onDemandEntriesUtils=require(\"./on-demand-entries-utils\");var _default=async(_ref)=>{var{assetPrefix}=_ref;_router.default.ready(()=>{_router.default.events.on('routeChangeComplete',_onDemandEntriesUtils.setupPing.bind(void 0,assetPrefix,()=>_router.default.pathname));});(0,_onDemandEntriesUtils.setupPing)(assetPrefix,()=>_router.default.pathname,_onDemandEntriesUtils.currentPage);// prevent HMR connection from being closed when running tests\nif(!process.env.__NEXT_TEST_MODE){document.addEventListener('visibilitychange',event=>{var state=document.visibilityState;if(state==='visible'){(0,_onDemandEntriesUtils.setupPing)(assetPrefix,()=>_router.default.pathname,true);}else{(0,_onDemandEntriesUtils.closePing)();}});window.addEventListener('beforeunload',()=>{(0,_onDemandEntriesUtils.closePing)();});}};exports.default=_default;"]},"metadata":{},"sourceType":"script"}